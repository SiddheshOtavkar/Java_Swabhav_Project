package com.solidPrinciples.miniproject;

import java.util.Scanner;

public class Main {
    public static void main(String[] args) {

        Scanner scanner = new Scanner(System.in);

        try {
            // 1. Get product type
            System.out.print("Enter product type (ELECTRONICS / OTHER): ");
            String productType = scanner.nextLine().trim().toUpperCase();

            // 2. Get amount
            System.out.print("Enter order amount: ");
            double amount = scanner.nextDouble();
            scanner.nextLine(); // consume leftover newline

            if (amount <= 0) {
                System.out.println("Amount must be greater than 0.");
                return;
            }

            // 3. Choose payment method
            System.out.print("Choose payment method (CREDIT_CARD / PAYPAL): ");
            String paymentChoice = scanner.nextLine().trim().toUpperCase();

            // 4. Choose notification method
            System.out.print("Choose notification method (EMAIL / SMS): ");
            String notifyChoice = scanner.nextLine().trim().toUpperCase();

            // 5. Build Order
            Order order = new Order(productType, amount);

            // 6. Select discount
            IDiscountStrategy discount;
            if (productType.equals("ELECTRONICS")) {
                discount = new ElectronicsDiscount();
            } else {
                discount = new NoDiscount();
            }

            // 7. Select payment processor
            IPaymentProcessor payment;
            if (paymentChoice.equals("CREDIT_CARD")) {
                payment = new CreditCardProcessor();
            } else if (paymentChoice.equals("PAYPAL")) {
                payment = new PayPalProcessor();
            } else {
                System.out.println("Invalid payment method.");
                return;
            }

            // 8. Select notification method
            INotification notifier;
            if (notifyChoice.equals("EMAIL")) {
                notifier = new EmailNotification();
            } else if (notifyChoice.equals("SMS")) {
                notifier = new SMSNotification();
            } else {
                System.out.println("Invalid notification method.");
                return;
            }

            // 9. Process the order
            OrderProcessor processor = new OrderProcessor(discount, payment, notifier);
            processor.process(order);

        } catch (Exception e) {
            System.out.println("Something went wrong. Please enter valid input.");
        } finally {
            scanner.close();
        }
    }
}
